<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a1128">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SADPMR FRS">
    <title>Debug - SADPMR Financial Reporting System</title>
    <link rel="stylesheet" href="css/styles.css">
    
    <script>
        function handleLoginForm(event, redirectUrl) {
            event.preventDefault();
            
            // Simple demo login validation
            const username = document.getElementById('username')?.value || '';
            const password = document.getElementById('password')?.value || '';
            
            // Demo credentials
            const demoUsers = {
                'cfo@sadpmr.gov.za': { role: 'CFO', name: 'Sarah Nkosi', redirect: 'index.html' },
                'accountant@sadpmr.gov.za': { role: 'Accountant', name: 'John Smith', redirect: 'index.html' },
                'clerk@sadpmr.gov.za': { role: 'Clerk', name: 'Mike Davis', redirect: 'index.html' },
                'auditor@agsa.gov.za': { role: 'Auditor', name: 'Patience Moyo', redirect: 'index.html' }
            };
            
            if (demoUsers[username] && password === 'demo123') {
                // Store user info in sessionStorage for demo
                const user = demoUsers[username];
                sessionStorage.setItem('demoUser', JSON.stringify(user));
                
                // Redirect to dashboard
                window.location.href = user.redirect || redirectUrl || 'index.html';
            } else {
                // Show error message
                alert('Invalid credentials. Use demo credentials shown below.');
            }
        }
    </script></head>
<body>
    
    <h1>Debug: Current User Information</h1>
    
    <h2>Session Data:</h2>
    <pre></pre>
    
    <h2>Current User Object:</h2>
    <pre></pre>

    <h2>User Details:</h2>
    <ul>
        <li>ID: </li>
        <li>Username: </li>
        <li>Full Name: Sarah Nkosi</li>
        <li>Role: CFO</li>
        <li>Can Upload: </li>
        <li>Can Process: </li>
        <li>Can Approve: </li>
        <li>Can Generate PDF: </li>
    </ul>
    
    <h2>Role Checks:</h2>
    <ul>
        <li>Is CFO: </li>
        <li>Is Accountant: </li>
        <li>Is Clerk: </li>
        <li>Is Auditor: </li>
    </ul>
    
    <h2>No user logged in!</h2>
        
    <h2>Navigation Logic Test:</h2>
    <ul>
        <li>Show Upload Link: YESNO</li>
        <li>Show CFO Links: YESNO</li>
    </ul>
    
    <p><a href="login.html">Go to Login</a> | <a href="index.html">Go to Dashboard</a></p>

    <script src="js/utils.js"></script>
    </body>
</html>
