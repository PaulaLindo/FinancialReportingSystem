<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a1128">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SADPMR FRS">
    <title>Login - SADPMR Financial Reporting System</title>
    <link rel="stylesheet" href="css/styles.css">
    
<link rel="stylesheet" href="css/login.css">

    <script>
        function handleLoginForm(event) {
            event.preventDefault();
            
            // Simple demo login validation
            const username = document.getElementById('username')?.value || '';
            const password = document.getElementById('password')?.value || '';
            
            // Demo credentials
            const demoUsers = {
                'cfo@sadpmr.gov.za': { role: 'CFO', name: 'Sarah Nkosi', redirect: 'dashboard-logged-in.html', canUpload: true },
                'accountant@sadpmr.gov.za': { role: 'Accountant', name: 'John Smith', redirect: 'dashboard-logged-in.html', canUpload: true },
                'clerk@sadpmr.gov.za': { role: 'Clerk', name: 'Mike Davis', redirect: 'dashboard-logged-in.html', canUpload: true },
                'auditor@agsa.gov.za': { role: 'Auditor', name: 'Patience Moyo', redirect: 'dashboard-logged-in.html', canUpload: false }
            };
            
            if (demoUsers[username] && password === 'demo123') {
                // Store user info in sessionStorage for demo
                const user = demoUsers[username];
                sessionStorage.setItem('demoUser', JSON.stringify(user));
                
                // Redirect to logged-in dashboard
                window.location.href = 'dashboard-logged-in.html';
            } else {
                // Show error message
                alert('Invalid credentials. Use demo credentials shown below.');
            }
        }
    </script>

</head>
<body class="logged-out">
    
    <div class="login-container">
        <div class="login-box">
            <div class="login-header">
                <div class="login-logo">üîê</div>
                <h1>Welcome Back</h1>
                <p>SADPMR Financial Reporting System</p>
            </div>

                        <div class="alert alert-">
                            
                        </div>

            <form onsubmit="handleLoginForm(event)" method="GET">
                <div class="form-group">
                    <label for="username" class="form-label">Email Address</label>
                    <input 
                        type="email" 
                        id="username" 
                        name="username" 
                        class="form-input" 
                        placeholder="your.email@sadpmr.gov.za"
                        required
                        autofocus
                    >
                </div>

                <div class="form-group">
                    <label for="password" class="form-label">Password</label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        class="form-input" 
                        placeholder="Enter your password"
                        required
                    >
                </div>

                <button type="submit" class="login-button">
                    Sign In
                </button>
            </form>

            <div class="demo-credentials">
                <div class="demo-account">
                    <div>
                        <div class="demo-role">
                            <span class="role-badge role-cfo">CFO</span>
                            Full Access
                        </div>
                        <div class="demo-email">cfo@sadpmr.gov.za / demo123</div>
                    </div>
                </div>
                <div class="demo-account">
                    <div>
                        <div class="demo-role">
                            <span class="role-badge role-accountant">Accountant</span>
                            Process & Reports
                        </div>
                        <div class="demo-email">accountant@sadpmr.gov.za / demo123</div>
                    </div>
                </div>
                <div class="demo-account">
                    <div>
                        <div class="demo-role">
                            <span class="role-badge role-clerk">Clerk</span>
                            Upload Only
                        </div>
                        <div class="demo-email">clerk@sadpmr.gov.za / demo123</div>
                    </div>
                </div>
                <div class="demo-account">
                    <div>
                        <div class="demo-role">
                            <span class="role-badge role-auditor">Auditor</span>
                            View Only
                        </div>
                        <div class="demo-email">auditor@agsa.gov.za / demo123</div>
                    </div>
                </div>

                <div class="quick-login">
                    <button type="button" class="quick-login-btn" onclick="quickLogin('cfo@sadpmr.gov.za', 'demo123')">
                        Quick Login: CFO
                    </button>
                    <button type="button" class="quick-login-btn" onclick="quickLogin('accountant@sadpmr.gov.za', 'demo123')">
                        Quick Login: Accountant
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function quickLogin(username, password) {
            // Store user info in sessionStorage for demo
            const demoUsers = {
                'cfo@sadpmr.gov.za': { role: 'CFO', name: 'Sarah Nkosi', redirect: 'dashboard-logged-in.html', canUpload: true },
                'accountant@sadpmr.gov.za': { role: 'Accountant', name: 'John Smith', redirect: 'dashboard-logged-in.html', canUpload: true },
                'clerk@sadpmr.gov.za': { role: 'Clerk', name: 'Mike Davis', redirect: 'dashboard-logged-in.html', canUpload: true },
                'auditor@agsa.gov.za': { role: 'Auditor', name: 'Patience Moyo', redirect: 'dashboard-logged-in.html', canUpload: false }
            };
            
            const user = demoUsers[username];
            if (user && password === 'demo123') {
                sessionStorage.setItem('demoUser', JSON.stringify(user));
                // Redirect directly to dashboard, bypassing form submission
                window.location.href = user.redirect;
            } else {
                alert('Invalid credentials. Use the demo accounts shown below.');
            }
        }

        // Auto-hide alerts after 5 seconds
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.style.transition = 'all 0.5s ease';
                alert.style.opacity = '0';
                alert.style.transform = 'translateY(-10px)';
                setTimeout(() => alert.remove(), 500);
            });
        }, 5000);
    </script>

    <script src="js/utils.js"></script>
    </body>
</html>
