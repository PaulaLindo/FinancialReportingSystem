<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a1128">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SADPMR FRS">
    <title>Dashboard - SADPMR Financial Reporting System</title>
    <link rel="stylesheet" href="css/styles.css">
    
    <script>
        // Update UI based on logged-in user
        function updateUIForUser() {
            const user = JSON.parse(sessionStorage.getItem('demoUser') || 'null');
            
            if (user) {
                // Update welcome message
                const welcomeTitle = document.querySelector('.hero h1');
                const welcomeSubtitle = document.querySelector('.hero-subtitle');
                
                if (welcomeTitle) welcomeTitle.textContent = `Welcome back, ${user.name}!`;
                if (welcomeSubtitle) welcomeSubtitle.textContent = getRoleDescription(user.role);
                
                // Show/hide upload button based on role
                const uploadButton = document.querySelector('.btn-upload');
                if (uploadButton) {
                    uploadButton.style.display = user.canUpload ? 'inline-block' : 'none';
                }
                
                // Update navbar
                const userName = document.querySelector('.user-name');
                const userRole = document.querySelector('.user-role');
                if (userName) userName.textContent = user.name;
                if (userRole) {
                    userRole.textContent = user.role;
                    userRole.style.background = getRoleColor(user.role);
                }
                
                // Show user menu, hide auth menu
                const userMenu = document.querySelector('.user-menu');
                const authMenu = document.querySelector('.auth-menu');
                if (userMenu) userMenu.style.display = 'block';
                if (authMenu) authMenu.style.display = 'none';
            }
        }
        
        function getRoleDescription(role) {
            const descriptions = {
                'CFO': 'Chief Financial Officer - Full system access',
                'Accountant': 'Accountant - Process & Reports access',
                'Clerk': 'Clerk - Upload only access',
                'Auditor': 'Auditor - View only access'
            };
            return descriptions[role] || 'User';
        }
        
        function getRoleColor(role) {
            const colors = {
                'CFO': '#d4a574',
                'Accountant': '#4a90e2',
                'Clerk': '#7fba00',
                'Auditor': '#ff6b35'
            };
            return colors[role] || '#666';
        }
        
        // Handle logout
        function handleLogout() {
            sessionStorage.removeItem('demoUser');
            window.location.href = 'dashboard-logged-out.html';
        }
        
        // Run on page load
        document.addEventListener('DOMContentLoaded', updateUIForUser);
    </script>
</head>
<body>
    <nav class="navbar">
    <div class="container">
        <div class="nav-brand">
            <h2>SADPMR Financial Reporting System</h2>
            <p class="tagline">GRAP-Compliant Financial Statement Automation</p>
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <div class="nav-wrapper" id="navMenu">
            <ul class="nav-menu">
                <li><a href="dashboard-logged-in.html" class="active">Dashboard</a></li>
                <li><a href="upload.html" class="btn-upload">Upload Trial Balance</a></li>
                <li><a href="reports.html">Reports</a></li>
                <li><a href="export.html">Export</a></li>
                <li><a href="admin.html">Admin</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
            
            <div class="user-menu">
                <div class="user-info">
                    <span class="user-name">Sarah Nkosi</span>
                    <span class="user-role" style="background: #d4a574">CFO</span>
                </div>
                <a href="javascript:void(0)" onclick="handleLogout()" class="logout-btn">Logout</a>
            </div>
            
            <div class="auth-menu">
                <a href="login.html" class="login-btn">Login</a>
            </div>
        </div>
    </div>
    
    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
</nav>

    <div class="hero">
        <div class="container">
            <h1>Welcome back, Sarah Nkosi!</h1>
            <p class="hero-subtitle">Chief Financial Officer - Full system access</p>
            
            <div class="hero-buttons">
                <a href="upload.html" class="btn btn-primary btn-upload">Upload Trial Balance</a>
                <a href="about.html" class="btn btn-secondary">Learn More</a>
            </div>
        </div>
    </div>

    <div class="container features-section">
        <h2 class="section-title">Key Features</h2>
        <div class="features-grid">
            <div class="feature-card" style="transition: 800ms cubic-bezier(0.4, 0, 0.2, 1); opacity: 1; transform: translateY(0px);">
                <div class="feature-icon">üìä</div>
                <h3>Automated Mapping</h3>
                <p>Intelligent mapping of Trial Balance accounts to GRAP line items with zero manual intervention</p>
            </div>
            
            <div class="feature-card" style="transition-delay: 0.1s;">
                <div class="feature-icon">‚úÖ</div>
                <h3>GRAP Compliance</h3>
                <p>100% compliant with Generally Recognised Accounting Practice standards approved by ASB</p>
            </div>
            
            <div class="feature-card" style="transition-delay: 0.2s;">
                <div class="feature-icon">üîç</div>
                <h3>Audit Trail</h3>
                <p>Complete audit trail for AGSA compliance - every change logged with timestamps and user IDs</p>
            </div>
            
            <div class="feature-card" style="transition-delay: 0.3s;">
                <div class="feature-icon">üìÑ</div>
                <h3>Instant PDF Export</h3>
                <p>Generate pixel-perfect PDFs matching SADPMR official formats with one click</p>
            </div>
            
            <div class="feature-card" style="transition-delay: 0.4s;">
                <div class="feature-icon">üíπ</div>
                <h3>Cash Flow Automation</h3>
                <p>Automated Cash Flow Statement generation using Indirect Method - no manual calculations</p>
            </div>
            
            <div class="feature-card" style="transition-delay: 0.5s;">
                <div class="feature-icon">üìà</div>
                <h3>Ratio Analysis</h3>
                <p>Automatic calculation of key financial ratios: liquidity, solvency, efficiency, profitability</p>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Upload Trial Balance</h3>
                    <p>Import your Trial Balance from Pastel or Excel (CSV, XLSX supported)</p>
                </div>
                <div class="step-arrow">‚Üí</div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Automatic Mapping</h3>
                    <p>System intelligently maps accounts to GRAP categories</p>
                </div>
                <div class="step-arrow">‚Üí</div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Generate Reports</h3>
                    <p>Click one button to generate complete financial statements</p>
                </div>
                <div class="step-arrow">‚Üí</div>
                <div class="step">
                    <div class="step-number">4</div>
                    <h3>Download PDF</h3>
                    <p>Receive GRAP-compliant PDF ready for AGSA submission</p>
                </div>
            </div>
        </div>
    </div>

    <div class="cta-section">
        <div class="container">
            <h2>Ready to Streamline Your Financial Reporting?</h2>
            <p>Upload your Trial Balance now and see the magic happen</p>
            
            <a href="upload.html" class="btn btn-large">Get Started</a>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 SADPMR Financial Reporting System | Developed for Schedule 3A PFMA Compliance</p>
            <p class="footer-note">Demo Version - February 3, 2026 Presentation</p>
        </div>
    </footer>

    <script src="js/utils.js"></script>
    <script src="js/main.js"></script>
    <script src="js/mobile-menu.js"></script>
</body>
</html>
